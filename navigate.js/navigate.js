//selection = [0,4,5,8]

const tree = {
    "children": [
        {
            "children": [
                {
                    "children": [
                        {
                            "children": [
                                {
                                    "results": [
                                        8
                                    ]
                                },
                                {
                                    "results": [
                                        8
                                    ]
                                },
                                {
                                    "results": [
                                        9
                                    ]
                                },
                                {
                                    "results": [
                                        10
                                    ]
                                }
                            ]
                        },
                        {
                            "children": [
                                {
                                    "results": [
                                        1
                                    ]
                                },
                                {
                                    "results": [
                                        2
                                    ]
                                },
                                {
                                    "results": [
                                        2
                                    ]
                                },
                                {
                                    "results": [
                                        3,
                                        2
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "children": [
                        {
                            "children": [
                                {
                                    "results": [
                                        6
                                    ]
                                },
                                {
                                    "results": [
                                        6
                                    ]
                                },
                                {
                                    "results": [
                                        7
                                    ]
                                },
                                {
                                    "results": [
                                        7
                                    ]
                                }
                            ]
                        },
                        {
                            "children": [
                                {
                                    "results": [
                                        4
                                    ]
                                },
                                {
                                    "results": [
                                        4
                                    ]
                                },
                                {
                                    "results": [
                                        5
                                    ]
                                },
                                {
                                    "results": [
                                        3,
                                        5
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "children": [
                        {
                            "children": [
                                {
                                    "results": [
                                        6
                                    ]
                                },
                                {
                                    "results": [
                                        6
                                    ]
                                },
                                {
                                    "results": [
                                        7
                                    ]
                                },
                                {
                                    "results": [
                                        7
                                    ]
                                }
                            ]
                        },
                        {
                            "children": [
                                {
                                    "results": [
                                        4
                                    ]
                                },
                                {
                                    "results": [
                                        4
                                    ]
                                },
                                {
                                    "results": [
                                        5
                                    ]
                                },
                                {
                                    "results": [
                                        3,
                                        5
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "children": [
                {
                    "children": [
                        {
                            "children": [
                                {
                                    "results": [
                                        14
                                    ]
                                },
                                {
                                    "results": [
                                        14
                                    ]
                                },
                                {
                                    "results": [
                                        11
                                    ]
                                },
                                {
                                    "results": [
                                        11
                                    ]
                                }
                            ]
                        },
                        {
                            "children": [
                                {
                                    "results": [
                                        14
                                    ]
                                },
                                {
                                    "results": [
                                        14
                                    ]
                                },
                                {
                                    "results": [
                                        11
                                    ]
                                },
                                {
                                    "results": [
                                        11
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "children": [
                        {
                            "children": [
                                {
                                    "results": [
                                        12,
                                        14
                                    ]
                                },
                                {
                                    "results": [
                                        12,
                                        14
                                    ]
                                },
                                {
                                    "results": [
                                        13
                                    ]
                                },
                                {
                                    "results": [
                                        13
                                    ]
                                }
                            ]
                        },
                        {
                            "children": [
                                {
                                    "results": [
                                        12,
                                        14
                                    ]
                                },
                                {
                                    "results": [
                                        12,
                                        14
                                    ]
                                },
                                {
                                    "results": [
                                        15
                                    ]
                                },
                                {
                                    "results": [
                                        15
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "children": [
                        {
                            "children": [
                                {
                                    "results": [
                                        12,
                                        14
                                    ]
                                },
                                {
                                    "results": [
                                        12,
                                        14
                                    ]
                                },
                                {
                                    "results": [
                                        13
                                    ]
                                },
                                {
                                    "results": [
                                        13
                                    ]
                                }
                            ]
                        },
                        {
                            "children": [
                                {
                                    "results": [
                                        12,
                                        14
                                    ]
                                },
                                {
                                    "results": [
                                        12,
                                        14
                                    ]
                                },
                                {
                                    "results": [
                                        13
                                    ]
                                },
                                {
                                    "results": [
                                        13
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}

const results = [
    {
        "id": 1,
        "title": "Tieni in ordine il prato con il tagliaerba",
        "description": "Il tagliaerba è il tuo miglior alleato per prenderti cura e tenere sempre in ordine il tuo spazio verde. Per svolgere un buon lavoro in breve tempo e con poco sforzo, scegli la tipologia giusta considerando le dimensioni del tuo giardino, il tipo di terreno e l’alimentazione più adatta.",
        "url": "https://www.leroymerlin.it/prodotti/tagliaerba-CAT749-c?ruleFilter=FRULE66412%2CFRULE1920675"
    },
    {
        "id": 2,
        "title": "Tieni in ordine il prato con il tagliaerba",
        "description": "Il tagliaerba è il tuo miglior alleato per prenderti cura e tenere sempre in ordine il tuo spazio verde. Per svolgere un buon lavoro in breve tempo e con poco sforzo, scegli la tipologia giusta considerando le dimensioni del tuo giardino, il tipo di terreno e l’alimentazione più adatta.",
        "url": "https://www.leroymerlin.it/prodotti/tagliaerba-CAT749-c?ruleFilter=FRULE1269%2CFRULE1920675"
    },
    {
        "id": 3,
        "title": "Trattorini tagliaerba",
        "description": "Hai un giardino molto grande e hai bisogno di un rasaerba adeguato per tagliare il prato? Scegli un trattorino tagliaerba in grado di coprire grandi spazi di prato e accorciare il tempo necessario a completare il taglio dell\"erba",
        "url": "https://www.leroymerlin.it/prodotti/trattorini-CAT598-c"
    },
    {
        "id": 4,
        "title": "Tieni in ordine il prato con il tagliaerba",
        "description": "Il tagliaerba è il tuo miglior alleato per prenderti cura e tenere sempre in ordine il tuo spazio verde. Per svolgere un buon lavoro in breve tempo e con poco sforzo, scegli la tipologia giusta considerando le dimensioni del tuo giardino, il tipo di terreno e l’alimentazione più adatta.",
        "url": "https://www.leroymerlin.it/prodotti/tagliaerba-CAT749-c?ruleFilter=FRULE66412%2CFRULE1306"
    },
    {
        "id": 5,
        "title": "Tieni in ordine il prato con il tagliaerba",
        "description": "Il tagliaerba è il tuo miglior alleato per prenderti cura e tenere sempre in ordine il tuo spazio verde. Per svolgere un buon lavoro in breve tempo e con poco sforzo, scegli la tipologia giusta considerando le dimensioni del tuo giardino, il tipo di terreno e l’alimentazione più adatta.",
        "url": "https://www.leroymerlin.it/prodotti/tagliaerba-CAT749-c?ruleFilter=FRULE1269%2CFRULE1306"
    },
    {
        "id": 6,
        "title": "Tieni in ordine il prato con il tagliaerba",
        "description": "Il tagliaerba è il tuo miglior alleato per prenderti cura e tenere sempre in ordine il tuo spazio verde. Per svolgere un buon lavoro in breve tempo e con poco sforzo, scegli la tipologia giusta considerando le dimensioni del tuo giardino, il tipo di terreno e l’alimentazione più adatta.",
        "url": "https://www.leroymerlin.it/prodotti/tagliaerba-CAT749-c?ruleFilter=FRULE66412%2CFRULE1920678"
    },
    {
        "id": 7,
        "title": "Tieni in ordine il prato con il tagliaerba",
        "description": "Il tagliaerba è il tuo miglior alleato per prenderti cura e tenere sempre in ordine il tuo spazio verde. Per svolgere un buon lavoro in breve tempo e con poco sforzo, scegli la tipologia giusta considerando le dimensioni del tuo giardino, il tipo di terreno e l’alimentazione più adatta.",
        "url": "https://www.leroymerlin.it/prodotti/tagliaerba-CAT749-c?ruleFilter=FRULE1269%2CFRULE1920677"
    },
    {
        "id": 8,
        "title": "Tieni in ordine il prato con il tagliaerba",
        "description": "Il tagliaerba è il tuo miglior alleato per prenderti cura e tenere sempre in ordine il tuo spazio verde. Per svolgere un buon lavoro in breve tempo e con poco sforzo, scegli la tipologia giusta considerando le dimensioni del tuo giardino, il tipo di terreno e l’alimentazione più adatta.",
        "url": "https://www.leroymerlin.it/prodotti/tagliaerba-CAT749-c?ruleFilter=FRULE1920152%2CFRULE1920677"
    },
    {
        "id": 9,
        "title": "Tieni in ordine il prato con il tagliaerba",
        "description": "Il tagliaerba è il tuo miglior alleato per prenderti cura e tenere sempre in ordine il tuo spazio verde. Per svolgere un buon lavoro in breve tempo e con poco sforzo, scegli la tipologia giusta considerando le dimensioni del tuo giardino, il tipo di terreno e l’alimentazione più adatta.",
        "url": "https://www.leroymerlin.it/prodotti/tagliaerba-CAT749-c?ruleFilter=FRULE1920153%2CFRULE1920677"
    },
    {
        "id": 10,
        "title": "Tieni in ordine il prato con il tagliaerba",
        "description": "Il tagliaerba è il tuo miglior alleato per prenderti cura e tenere sempre in ordine il tuo spazio verde. Per svolgere un buon lavoro in breve tempo e con poco sforzo, scegli la tipologia giusta considerando le dimensioni del tuo giardino, il tipo di terreno e l’alimentazione più adatta.",
        "url": "https://www.leroymerlin.it/prodotti/tagliaerba-CAT749-c?ruleFilter=FRULE1920154%2CFRULE1920677"
    },
    {
        "id": 11,
        "title": "Il decespugliatore: per cespugli, rovi, punti difficili da raggiungere",
        "description": "Il decespugliatore è una macchina che si presta per tagliare cespugli, falciare i rovi e tagliare le sterpaglie e l\"erba alta in punti difficili da raggiungere, ad esempio lungo i fossi o a ridosso di muri, cordoli, tronchi di piante. Ci sono due sistemi di taglio: con due fili di nylon o con disco di taglio. Alcuni modelli permettono di scegliere il sistema di taglio più adatto di volta in volta in base al lavoro da svolgere. Il decespugliatore può essere elettrico, a batteria e a scoppio, a benzina o a miscela. Il suo motore si trova sul retro di un manico su cui sono poste due maniglie o un doppio manubrio.",
        "url": "https://www.leroymerlin.it/prodotti/decespugliatori-CAT599-c?ruleFilter=FRULE1923446"
    },
    {
        "id": 12,
        "title": "Per le rifiniture, il tagliabordi",
        "description": "Ora che hai tagliato il tuo prato con un tagliaerba, ti sarai accorto che ci sono dei punti in cui la macchina non riesce a ottenere un risultato perfetto. Infatti, per i lavori di finitura, come i cordoli e le aiuole, ti sarà di grande aiuto il tagliabordi. Il tagliabordi ha un motore nella parte inferiore del manico che aziona una bobina di filo di nylon. Questo taglia l’erba ruotando rapidamente. Anche in questo caso possono esserci macchine elettriche a filo, a batteria oppure a scoppio con motore a due tempi.",
        "url": "https://www.leroymerlin.it/prodotti/tagliabordi-CAT600-c?sellingAidsFilter=SRULE4205"
    },
    {
        "id": 13,
        "title": "Il decespugliatore: per cespugli, rovi, punti difficili da raggiungere",
        "description": "Il decespugliatore è una macchina che si presta per tagliare cespugli, falciare i rovi e tagliare le sterpaglie e l\"erba alta in punti difficili da raggiungere, ad esempio lungo i fossi o a ridosso di muri, cordoli, tronchi di piante. Ci sono due sistemi di taglio: con due fili di nylon o con disco di taglio. Alcuni modelli permettono di scegliere il sistema di taglio più adatto di volta in volta in base al lavoro da svolgere. Il decespugliatore può essere elettrico, a batteria e a scoppio, a benzina o a miscela. Il suo motore si trova sul retro di un manico su cui sono poste due maniglie o un doppio manubrio.",
        "url": "https://www.leroymerlin.it/prodotti/decespugliatori-CAT599-c?sellingAidsFilter=SRULE3624&ruleFilter=FRULE1923445"
    },
    {
        "id": 14,
        "title": "Il decespugliatore: per cespugli, rovi, punti difficili da raggiungere",
        "description": "Il decespugliatore è una macchina che si presta per tagliare cespugli, falciare i rovi e tagliare le sterpaglie e l\"erba alta in punti difficili da raggiungere, ad esempio lungo i fossi o a ridosso di muri, cordoli, tronchi di piante. Ci sono due sistemi di taglio: con due fili di nylon o con disco di taglio. Alcuni modelli permettono di scegliere il sistema di taglio più adatto di volta in volta in base al lavoro da svolgere. Il decespugliatore può essere elettrico, a batteria e a scoppio, a benzina o a miscela. Il suo motore si trova sul retro di un manico su cui sono poste due maniglie o un doppio manubrio.",
        "url": "https://www.leroymerlin.it/prodotti/decespugliatori-CAT599-c?sellingAidsFilter=SRULE3625&ruleFilter=FRULE1923445"
    },
    {
        "id": 15,
        "title": "Il decespugliatore: per cespugli, rovi, punti difficili da raggiungere",
        "description": "Il decespugliatore è una macchina che si presta per tagliare cespugli, falciare i rovi e tagliare le sterpaglie e l\"erba alta in punti difficili da raggiungere, ad esempio lungo i fossi o a ridosso di muri, cordoli, tronchi di piante. Ci sono due sistemi di taglio: con due fili di nylon o con disco di taglio. Alcuni modelli permettono di scegliere il sistema di taglio più adatto di volta in volta in base al lavoro da svolgere. Il decespugliatore può essere elettrico, a batteria e a scoppio, a benzina o a miscela. Il suo motore si trova sul retro di un manico su cui sono poste due maniglie o un doppio manubrio.",
        "url": "https://www.leroymerlin.it/prodotti/decespugliatori-CAT599-c?sellingAidsFilter=SRULE3623&ruleFilter=FRULE1923445"
    }
]

const navigate = (selection, tree, numberOfSteps) => {
    if (!selection) {
        return undefined
    }

    if (selection.length < numberOfSteps) {
        return undefined
    }

    const lastElement = selection
        .reduce((acc, currentSelection) => {
            if (!acc) {
                return acc
            }
            return acc.children[currentSelection]
        }, tree)

    if (!lastElement) {
        return undefined
    }


    return lastElement.results
}


const resultIds = navigate([1, 1, 0, 0], tree, 4);

const selectedResults = resultIds.map(resultId => {
    return results.find(r => r.id === resultId)
})

console.log(JSON.stringify(selectedResults, null, 2))
